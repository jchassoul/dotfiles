" Disable built-in plugins
let g:loaded_python_provider=0 
let g:loaded_ruby_provider=0 
let g:loaded_node_provider=0
let g:loaded_perl_provider=0
let g:loaded_getscript=0
let g:loaded_getscriptPlugin=0
let g:loaded_gzip=0
let g:loaded_netrw=0
let g:loaded_netrwFileHandlers=0
let g:loaded_netrwPlugin=0
let g:loaded_netrwSettings=0
let g:loaded_rrhelper=0
let g:loaded_tar=0
let g:loaded_tarPlugin=0
let g:loaded_tohtml=0
let g:loaded_tutor=0
let g:loaded_vimball=0
let g:loaded_vimballPlugin=0
let g:loaded_zip=0
let g:loaded_zipPlugin=0

" The dark powered beam distribution 
let g:python3_host_prog = '/usr/bin/python3'

" Install vim-plug if not found
if empty(glob('~/.vim/autoload/plug.vim'))
    silent !curl -fLo ~/.vim/autoload/plug.vim --create-dirs
                \ https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
endif

" Run PlugInstall if there are missing plugins
autocmd VimEnter * if len(filter(values(g:plugs), '!isdirectory(v:val.dir)'))
            \| PlugInstall --sync | source $MYVIMRC
            \| endif

syntax on

filetype plugin indent on

set nocompatible
set mouse=a
set noerrorbells
set clipboard=unnamedplus
set encoding=utf-8
set number relativenumber
set nohlsearch
set hidden
set wildmode=longest,list,full
set splitbelow splitright
set tabstop=4 softtabstop=4
set shiftwidth=4
set expandtab
set autoindent
set smartindent
set nowrap
set ignorecase
set smartcase
set noswapfile
set nobackup
set undodir=~/.vim/undodir
set undofile
set incsearch
set switchbuf=usetab,newtab
set noshowmode
set termguicolors
set t_Co=256
set t_ut=
set signcolumn=yes
set updatetime=50
set shortmess=I
set completeopt=longest,menuone
set omnifunc=syntaxcomplete#Complete
set wildmenu
set lazyredraw
set showmatch
set wildignore+=*/tmp/*,*.so,*.swp,*.zip,*.tar.*
set laststatus=2
set cursorline
set colorcolumn=88

highligh ColorColum ctermbg=0 guibg=lightgrey

" For conceal markers.
if has('conceal')
    set conceallevel=2 concealcursor=niv
endif

" Plugins will be downloaded under the specified directory.
call plug#begin('~/.vim/plugged')

" Declare the list of plugins.
Plug 'tpope/vim-sensible'
Plug 'tpope/vim-eunuch'
Plug 'tpope/vim-fugitive'
Plug 'tpope/vim-surround'
Plug 'tpope/vim-unimpaired'
Plug 'tpope/vim-repeat'
Plug 'mhinz/vim-startify'
Plug 'sheerun/vim-polyglot'
Plug 'easymotion/vim-easymotion'
Plug 'machakann/vim-highlightedyank'
Plug 'junegunn/goyo.vim', {'for':['markdown','vimwiki']}
Plug 'junegunn/limelight.vim', {'for':['markdown','vimwiki']}
Plug 'Shougo/denite.nvim'
Plug 'justinmk/vim-dirvish'
Plug 'kristijanhusak/vim-dirvish-git'
Plug 'davisdude/vim-love-docs'
Plug 'vim-pandoc/vim-pandoc', {'for':['markdown','vimwiki']}
Plug 'vim-pandoc/vim-pandoc-syntax', {'for':['markdown','vimwiki']}
Plug 'jpalardy/vim-slime'
Plug 'christoomey/vim-tmux-navigator'
Plug 'jiangmiao/auto-pairs'
Plug 'jremmen/vim-ripgrep'
Plug 'mbbill/undotree'
Plug 'sonph/onehalf', {'rtp':'vim'}
Plug 'ackyshake/VimCompletesMe'
Plug 'Shougo/deoplete.nvim', {'for':['python','lua','erlang']}
Plug 'roxma/nvim-yarp'
Plug 'roxma/vim-hug-neovim-rpc'
Plug 'lighttiger2505/deoplete-vim-lsp', {'for':['python','lua','erlang']}
Plug 'SirVer/ultisnips'
Plug 'prabirshrestha/async.vim'
Plug 'prabirshrestha/vim-lsp'
Plug 'thomasfaingnaert/vim-lsp-snippets'
Plug 'thomasfaingnaert/vim-lsp-ultisnips'
Plug 'dense-analysis/ale', {'for':['python','lua','erlang']}
Plug 'sbdchd/neoformat', {'for':['python','lua','erlang']}
Plug 'ryanoasis/vim-devicons'
Plug 'itchyny/lightline.vim'
Plug 'mengelbrecht/lightline-bufferline'
Plug 'vimwiki/vimwiki'
Plug 'mattn/calendar-vim'
Plug 'chrisbra/Colorizer'
Plug 'Yggdroot/indentLine'
Plug 'vim-test/vim-test', {'for':['python','lua','erlang']}
Plug 'fisadev/vim-isort', {'for':'python'}
Plug 'mattn/vim-lsp-settings'

" List ends here. Plugins become visible to Vim after this call.
call plug#end()

colorscheme onehalfdark
"highlight Normal guibg=NONE

let g:AutoPairsMapCR = 0

" Custom keys
map <leader>- :split<CR>
map <leader>\ :vsplit<CR>
map <leader>t :tabnew<CR>
map <leader>j :SlimeSend1 ipython --matplotlib<CR>
nnoremap <Leader>jq :SlimeSend1 exit<CR>
map <leader>l :ColorToggle<CR>
map <leader>q :q<CR>
map <leader>s :update<CR>
map <leader>S :setlocal spell! spelllang=en_us<CR>
map <leader>e :qa!<CR>
map <leader>c :setlocal formatoptions-=cro<CR>
map <leader>C :setlocal formatoptions=cro<CR>
" Denite
nnoremap <leader>w :<C-u>Denite buffer<CR>
nnoremap <leader>8 :<C-u>DeniteCursorWord grep:.<CR>
nnoremap <leader>/ :<C-u>Denite -start-filter grep:::!<CR>
nnoremap <leader><Space>/ :<C-u>DeniteBufferDir -start-filter grep:::!<CR>
nnoremap <leader>d :<C-u>DeniteBufferDir file/rec -start-filter<CR>
nnoremap <leader>r :<C-u>Denite -resume -cursor-pos=+1<CR>
nnoremap <leader><C-r> :<C-u>Denite register:.<CR>
" Resize
nnoremap <silent> <C-Left> :vertical resize +5<CR>
nnoremap <silent> <C-Right> :vertical resize -5<CR>
nnoremap <silent> <C-Up> :resize +5<CR>
nnoremap <silent> <C-Down> :resize -5<CR>
" Replace
nnoremap R :%s//gI<Left><Left><Left>
" Goyo
map <leader>gy :Goyo<CR>
" T Suite
nmap <silent> t<C-n> :TestNearest<CR>
nmap <silent> t<C-f> :TestFile<CR>
nmap <silent> t<C-s> :TestSuite<CR>
nmap <silent> t<C-l> :TestLast<CR>
nmap <silent> t<C-g> :TestVisit<CR>
" F keys
nnoremap <F1> :tab h<CR>
nnoremap <F2> :UndotreeToggle<CR>
" <F3> : File Tree!
nnoremap <F4> :<C-u>Denite file/rec -start-filter<CR>
nmap <F7> :CalendarT<CR>
" The Operator
map ; :
noremap ;; ;

autocmd InsertEnter * norm zz

" Load all plugins now.
" Plugins need to be added to runtimepath before helptags can be generated.
packloadall
" Load all of the helptags now, after plugins have been loaded.
" All messages and errors will be ignored.
silent! helptags ALL

" Condition should identify terminal in question so
"  TODO missing f keys and test this shit yo! 
" that it won't change anything for terminals without this problem
if !has("gui_running") && $TERM is "xterm-256color"
    for [key, code] in [["<F1>", "\eOP"],
                        \["<F2>", "\eOQ"],
                        \["<F5>", "\e[15~"],
                        \]
        execute "set" key."=".code
    endfor
endif

let g:startify_custom_header = [
\"                                                                                ",
\"                   ___           _,.---,---._                                   ",
\"                  |         ,;~'             '~;,                               ",
\"                  |       ,;                     ;,                             ",
\"         Frontal  |      ;                         ; ,--- Supraorbital Foramen  ",
\"          Bone    |     ,'                         /'                           ",
\"                  |    ,;                        /' ;,                          ",
\"                  |    ; ;      .           . <-'  ; |                          ",
\"                  |__  | ;   ______       ______   ;<----- Coronal Suture       ",
\"                 ___   |  '/~'     ~' . '~     '~\\'  |                         ",
\"                 |     |  ~  ,-~~~^~, | ,~^~~~-,  ~  |                          ",
\"       Maxilla,  |      |   |        }:{        | <------ Orbit                 ",
\"      Nasal and  |      |   l       / | \\       !   |                          ",
\"       Zygomatic |      .~  (__,.--' .^. '--.,__)  ~.                           ",
\"        Bones    |      |    ----;' / | \\ `;-<--------- Infraorbital Foramen   ",
\"                 |__     \\__.       \\/^\\/       .__/                         ",
\"                    ___   V| \\                 / |V <--- Mastoid Proces        ",
\"                    |      | |T~\\___!___!___/~T| |                             ",
\"                    |      | |`IIII_I_I_I_IIII'| |                              ",
\"           Mandible |      |  \\,III I I I III,/  |                             ",
\"                    |       \\   `~~~~~~~~~~'    /                              ",
\"                    |         \\   .       . <-x---- Mental Foramen             ",
\"                    |__         \\.    ^    ./                                  ",
\"                                  ^~~~^~~~^                                     ",
\"                                                                                ",
\"        > Thou shalt not make a machine in the likeness of a human mind.        ",
\"        - The Orange Catholic Bible.                                            ",
\"                                                                                "]
